View(tidy_data)
### 這邊讓你看 key 的長相
df_education_wide %>% count(key)
df_education_wide %>%
mutate(key = str_replace(key,"doctor","level")) %>%
mutate(key = str_replace(key,"graduated","edu_status")) %>%
mutate(key = str_replace(key,"m","gender"))
### count 結果借你看
#> # A tibble: 45 x 2
#>    key                                   n
#>  * <chr>                             <int>
#>  1 edu_doctor_graduated_f             7760
#>  2 edu_doctor_ungraduated_f           7760
#>  3 edu_doctor_ungraduated_m           7760
#>  4 edu_illiterate_f                   7760
#>  5 edu_illiterate_m                   7760
#>  6 edu_junior_graduated_f             7760
#>  7 edu_junior_graduated_m             7760
#>  8 edu_junior_ungraduated_f           7760
#>  9 edu_junior_ungraduated_m           7760
#> 10 edu_juniorcollege_2ys_graduated_f  7760
#> # … with 35 more rows
### your code
### your result should be
#> # A tibble: 349,200 x 9
#>    district_code site_id  village edu_doctor_gradu… edu   level  graduate gender
#>    <chr>         <chr>    <chr>               <int> <chr> <chr>  <chr>    <chr>
#>  1 65000010001   新北市板橋區… 留侯里                  4 edu   doctor graduat… f
#>  2 65000010001   新北市板橋區… 留侯里                  4 edu   doctor ungradu… m
#>  3 65000010001   新北市板橋區… 留侯里                  4 edu   doctor ungradu… f
#>  4 65000010001   新北市板橋區… 留侯里                  4 edu   master graduat… m
#>  5 65000010001   新北市板橋區… 留侯里                  4 edu   master graduat… f
#>  6 65000010001   新北市板橋區… 留侯里                  4 edu   master ungradu… m
#>  7 65000010001   新北市板橋區… 留侯里                  4 edu   master ungradu… f
#>  8 65000010001   新北市板橋區… 留侯里                  4 edu   unive… graduat… m
#>  9 65000010001   新北市板橋區… 留侯里                  4 edu   unive… graduat… f
#> 10 65000010001   新北市板橋區… 留侯里                  4 edu   unive… ungradu… m
#> # … with 349,190 more rows, and 1 more variable: value <int>
View(df_education_wide)
### 這邊讓你看 key 的長相
df_education_wide %>% count(key)
df_education_wide %>%
mutate(key = str_replace(key,"doctor","level")) %>%
mutate(key = str_replace(key,"graduated","edu_status")) %>%
mutate(key = str_replace(key,"m","gender")) %>%view
### count 結果借你看
#> # A tibble: 45 x 2
#>    key                                   n
#>  * <chr>                             <int>
#>  1 edu_doctor_graduated_f             7760
#>  2 edu_doctor_ungraduated_f           7760
#>  3 edu_doctor_ungraduated_m           7760
#>  4 edu_illiterate_f                   7760
#>  5 edu_illiterate_m                   7760
#>  6 edu_junior_graduated_f             7760
#>  7 edu_junior_graduated_m             7760
#>  8 edu_junior_ungraduated_f           7760
#>  9 edu_junior_ungraduated_m           7760
#> 10 edu_juniorcollege_2ys_graduated_f  7760
#> # … with 35 more rows
### your code
### your result should be
#> # A tibble: 349,200 x 9
#>    district_code site_id  village edu_doctor_gradu… edu   level  graduate gender
#>    <chr>         <chr>    <chr>               <int> <chr> <chr>  <chr>    <chr>
#>  1 65000010001   新北市板橋區… 留侯里                  4 edu   doctor graduat… f
#>  2 65000010001   新北市板橋區… 留侯里                  4 edu   doctor ungradu… m
#>  3 65000010001   新北市板橋區… 留侯里                  4 edu   doctor ungradu… f
#>  4 65000010001   新北市板橋區… 留侯里                  4 edu   master graduat… m
#>  5 65000010001   新北市板橋區… 留侯里                  4 edu   master graduat… f
#>  6 65000010001   新北市板橋區… 留侯里                  4 edu   master ungradu… m
#>  7 65000010001   新北市板橋區… 留侯里                  4 edu   master ungradu… f
#>  8 65000010001   新北市板橋區… 留侯里                  4 edu   unive… graduat… m
#>  9 65000010001   新北市板橋區… 留侯里                  4 edu   unive… graduat… f
#> 10 65000010001   新北市板橋區… 留侯里                  4 edu   unive… ungradu… m
#> # … with 349,190 more rows, and 1 more variable: value <int>
View(tidy_data)
View(raw)
View(df_education_wide)
### 這邊讓你看 key 的長相
df_education_wide %>% count(key)
df_education_wide %>%
separate(key,c("edu","level","edu_status","gender")) %>%view
### count 結果借你看
#> # A tibble: 45 x 2
#>    key                                   n
#>  * <chr>                             <int>
#>  1 edu_doctor_graduated_f             7760
#>  2 edu_doctor_ungraduated_f           7760
#>  3 edu_doctor_ungraduated_m           7760
#>  4 edu_illiterate_f                   7760
#>  5 edu_illiterate_m                   7760
#>  6 edu_junior_graduated_f             7760
#>  7 edu_junior_graduated_m             7760
#>  8 edu_junior_ungraduated_f           7760
#>  9 edu_junior_ungraduated_m           7760
#> 10 edu_juniorcollege_2ys_graduated_f  7760
#> # … with 35 more rows
### your code
### your result should be
#> # A tibble: 349,200 x 9
#>    district_code site_id  village edu_doctor_gradu… edu   level  graduate gender
#>    <chr>         <chr>    <chr>               <int> <chr> <chr>  <chr>    <chr>
#>  1 65000010001   新北市板橋區… 留侯里                  4 edu   doctor graduat… f
#>  2 65000010001   新北市板橋區… 留侯里                  4 edu   doctor ungradu… m
#>  3 65000010001   新北市板橋區… 留侯里                  4 edu   doctor ungradu… f
#>  4 65000010001   新北市板橋區… 留侯里                  4 edu   master graduat… m
#>  5 65000010001   新北市板橋區… 留侯里                  4 edu   master graduat… f
#>  6 65000010001   新北市板橋區… 留侯里                  4 edu   master ungradu… m
#>  7 65000010001   新北市板橋區… 留侯里                  4 edu   master ungradu… f
#>  8 65000010001   新北市板橋區… 留侯里                  4 edu   unive… graduat… m
#>  9 65000010001   新北市板橋區… 留侯里                  4 edu   unive… graduat… f
#> 10 65000010001   新北市板橋區… 留侯里                  4 edu   unive… ungradu… m
#> # … with 349,190 more rows, and 1 more variable: value <int>
### 這邊讓你看 key 的長相
df_education_wide %>% count(key)
df_education_wide %>%
separate(key,c("edu","level","edu_status","gender")) %>%
str_replace(string = "edu_illiterate_f", pattern = "_f",replacement = " ","_f")%>%view
### count 結果借你看
#> # A tibble: 45 x 2
#>    key                                   n
#>  * <chr>                             <int>
#>  1 edu_doctor_graduated_f             7760
#>  2 edu_doctor_ungraduated_f           7760
#>  3 edu_doctor_ungraduated_m           7760
#>  4 edu_illiterate_f                   7760
#>  5 edu_illiterate_m                   7760
#>  6 edu_junior_graduated_f             7760
#>  7 edu_junior_graduated_m             7760
#>  8 edu_junior_ungraduated_f           7760
#>  9 edu_junior_ungraduated_m           7760
#> 10 edu_juniorcollege_2ys_graduated_f  7760
#> # … with 35 more rows
### your code
### your result should be
#> # A tibble: 349,200 x 9
#>    district_code site_id  village edu_doctor_gradu… edu   level  graduate gender
#>    <chr>         <chr>    <chr>               <int> <chr> <chr>  <chr>    <chr>
#>  1 65000010001   新北市板橋區… 留侯里                  4 edu   doctor graduat… f
#>  2 65000010001   新北市板橋區… 留侯里                  4 edu   doctor ungradu… m
#>  3 65000010001   新北市板橋區… 留侯里                  4 edu   doctor ungradu… f
#>  4 65000010001   新北市板橋區… 留侯里                  4 edu   master graduat… m
#>  5 65000010001   新北市板橋區… 留侯里                  4 edu   master graduat… f
#>  6 65000010001   新北市板橋區… 留侯里                  4 edu   master ungradu… m
#>  7 65000010001   新北市板橋區… 留侯里                  4 edu   master ungradu… f
#>  8 65000010001   新北市板橋區… 留侯里                  4 edu   unive… graduat… m
#>  9 65000010001   新北市板橋區… 留侯里                  4 edu   unive… graduat… f
#> 10 65000010001   新北市板橋區… 留侯里                  4 edu   unive… ungradu… m
#> # … with 349,190 more rows, and 1 more variable: value <int>
### 這邊讓你看 key 的長相
df_education_wide %>% count(key)
df_education_wide %>%
separate(key,c("edu","level","edu_status","gender")) %>%
str_replace(string = "edu_illiterate_f", pattern = "_f",replacement = "_","_f")%>%view
### count 結果借你看
#> # A tibble: 45 x 2
#>    key                                   n
#>  * <chr>                             <int>
#>  1 edu_doctor_graduated_f             7760
#>  2 edu_doctor_ungraduated_f           7760
#>  3 edu_doctor_ungraduated_m           7760
#>  4 edu_illiterate_f                   7760
#>  5 edu_illiterate_m                   7760
#>  6 edu_junior_graduated_f             7760
#>  7 edu_junior_graduated_m             7760
#>  8 edu_junior_ungraduated_f           7760
#>  9 edu_junior_ungraduated_m           7760
#> 10 edu_juniorcollege_2ys_graduated_f  7760
#> # … with 35 more rows
### your code
### your result should be
#> # A tibble: 349,200 x 9
#>    district_code site_id  village edu_doctor_gradu… edu   level  graduate gender
#>    <chr>         <chr>    <chr>               <int> <chr> <chr>  <chr>    <chr>
#>  1 65000010001   新北市板橋區… 留侯里                  4 edu   doctor graduat… f
#>  2 65000010001   新北市板橋區… 留侯里                  4 edu   doctor ungradu… m
#>  3 65000010001   新北市板橋區… 留侯里                  4 edu   doctor ungradu… f
#>  4 65000010001   新北市板橋區… 留侯里                  4 edu   master graduat… m
#>  5 65000010001   新北市板橋區… 留侯里                  4 edu   master graduat… f
#>  6 65000010001   新北市板橋區… 留侯里                  4 edu   master ungradu… m
#>  7 65000010001   新北市板橋區… 留侯里                  4 edu   master ungradu… f
#>  8 65000010001   新北市板橋區… 留侯里                  4 edu   unive… graduat… m
#>  9 65000010001   新北市板橋區… 留侯里                  4 edu   unive… graduat… f
#> 10 65000010001   新北市板橋區… 留侯里                  4 edu   unive… ungradu… m
#> # … with 349,190 more rows, and 1 more variable: value <int>
### 這邊讓你看 key 的長相
df_education_wide %>% count(key)
df_education_wide %>%
separate(key,c("edu","level","edu_status","gender")) %>%
str_replace(string = "edu_illiterate_f", pattern = "_f",replacement = "_b")%>%view
### count 結果借你看
#> # A tibble: 45 x 2
#>    key                                   n
#>  * <chr>                             <int>
#>  1 edu_doctor_graduated_f             7760
#>  2 edu_doctor_ungraduated_f           7760
#>  3 edu_doctor_ungraduated_m           7760
#>  4 edu_illiterate_f                   7760
#>  5 edu_illiterate_m                   7760
#>  6 edu_junior_graduated_f             7760
#>  7 edu_junior_graduated_m             7760
#>  8 edu_junior_ungraduated_f           7760
#>  9 edu_junior_ungraduated_m           7760
#> 10 edu_juniorcollege_2ys_graduated_f  7760
#> # … with 35 more rows
### your code
### your result should be
#> # A tibble: 349,200 x 9
#>    district_code site_id  village edu_doctor_gradu… edu   level  graduate gender
#>    <chr>         <chr>    <chr>               <int> <chr> <chr>  <chr>    <chr>
#>  1 65000010001   新北市板橋區… 留侯里                  4 edu   doctor graduat… f
#>  2 65000010001   新北市板橋區… 留侯里                  4 edu   doctor ungradu… m
#>  3 65000010001   新北市板橋區… 留侯里                  4 edu   doctor ungradu… f
#>  4 65000010001   新北市板橋區… 留侯里                  4 edu   master graduat… m
#>  5 65000010001   新北市板橋區… 留侯里                  4 edu   master graduat… f
#>  6 65000010001   新北市板橋區… 留侯里                  4 edu   master ungradu… m
#>  7 65000010001   新北市板橋區… 留侯里                  4 edu   master ungradu… f
#>  8 65000010001   新北市板橋區… 留侯里                  4 edu   unive… graduat… m
#>  9 65000010001   新北市板橋區… 留侯里                  4 edu   unive… graduat… f
#> 10 65000010001   新北市板橋區… 留侯里                  4 edu   unive… ungradu… m
#> # … with 349,190 more rows, and 1 more variable: value <int>
### 這邊讓你看 key 的長相
df_education_wide %>% count(key)
df_education_wide %>%
separate(key,c("edu","level","edu_status","gender")) %>%
str_replace(string = "edu_illiterate_f", pattern = "f",replacement = "_","_b")%>%view
### count 結果借你看
#> # A tibble: 45 x 2
#>    key                                   n
#>  * <chr>                             <int>
#>  1 edu_doctor_graduated_f             7760
#>  2 edu_doctor_ungraduated_f           7760
#>  3 edu_doctor_ungraduated_m           7760
#>  4 edu_illiterate_f                   7760
#>  5 edu_illiterate_m                   7760
#>  6 edu_junior_graduated_f             7760
#>  7 edu_junior_graduated_m             7760
#>  8 edu_junior_ungraduated_f           7760
#>  9 edu_junior_ungraduated_m           7760
#> 10 edu_juniorcollege_2ys_graduated_f  7760
#> # … with 35 more rows
### your code
### your result should be
#> # A tibble: 349,200 x 9
#>    district_code site_id  village edu_doctor_gradu… edu   level  graduate gender
#>    <chr>         <chr>    <chr>               <int> <chr> <chr>  <chr>    <chr>
#>  1 65000010001   新北市板橋區… 留侯里                  4 edu   doctor graduat… f
#>  2 65000010001   新北市板橋區… 留侯里                  4 edu   doctor ungradu… m
#>  3 65000010001   新北市板橋區… 留侯里                  4 edu   doctor ungradu… f
#>  4 65000010001   新北市板橋區… 留侯里                  4 edu   master graduat… m
#>  5 65000010001   新北市板橋區… 留侯里                  4 edu   master graduat… f
#>  6 65000010001   新北市板橋區… 留侯里                  4 edu   master ungradu… m
#>  7 65000010001   新北市板橋區… 留侯里                  4 edu   master ungradu… f
#>  8 65000010001   新北市板橋區… 留侯里                  4 edu   unive… graduat… m
#>  9 65000010001   新北市板橋區… 留侯里                  4 edu   unive… graduat… f
#> 10 65000010001   新北市板橋區… 留侯里                  4 edu   unive… ungradu… m
#> # … with 349,190 more rows, and 1 more variable: value <int>
### 這邊讓你看 key 的長相
df_education_wide %>% count(key)
df_education_wide %>%
separate(key,c("edu","level","edu_status","gender")) %>%
str_replace(string = "edu_illiterate_f", pattern = "f",replacement = "b")%>%view
### count 結果借你看
#> # A tibble: 45 x 2
#>    key                                   n
#>  * <chr>                             <int>
#>  1 edu_doctor_graduated_f             7760
#>  2 edu_doctor_ungraduated_f           7760
#>  3 edu_doctor_ungraduated_m           7760
#>  4 edu_illiterate_f                   7760
#>  5 edu_illiterate_m                   7760
#>  6 edu_junior_graduated_f             7760
#>  7 edu_junior_graduated_m             7760
#>  8 edu_junior_ungraduated_f           7760
#>  9 edu_junior_ungraduated_m           7760
#> 10 edu_juniorcollege_2ys_graduated_f  7760
#> # … with 35 more rows
### your code
### your result should be
#> # A tibble: 349,200 x 9
#>    district_code site_id  village edu_doctor_gradu… edu   level  graduate gender
#>    <chr>         <chr>    <chr>               <int> <chr> <chr>  <chr>    <chr>
#>  1 65000010001   新北市板橋區… 留侯里                  4 edu   doctor graduat… f
#>  2 65000010001   新北市板橋區… 留侯里                  4 edu   doctor ungradu… m
#>  3 65000010001   新北市板橋區… 留侯里                  4 edu   doctor ungradu… f
#>  4 65000010001   新北市板橋區… 留侯里                  4 edu   master graduat… m
#>  5 65000010001   新北市板橋區… 留侯里                  4 edu   master graduat… f
#>  6 65000010001   新北市板橋區… 留侯里                  4 edu   master ungradu… m
#>  7 65000010001   新北市板橋區… 留侯里                  4 edu   master ungradu… f
#>  8 65000010001   新北市板橋區… 留侯里                  4 edu   unive… graduat… m
#>  9 65000010001   新北市板橋區… 留侯里                  4 edu   unive… graduat… f
#> 10 65000010001   新北市板橋區… 留侯里                  4 edu   unive… ungradu… m
#> # … with 349,190 more rows, and 1 more variable: value <int>
### 這邊讓你看 key 的長相
df_education_wide %>% count(key)
df_education_wide %>%
separate(key,c("edu","level","edu_status","gender")) %>%
str_replace(string = edu_illiterate_f, pattern = "f",replacement = "b")%>%view
### count 結果借你看
#> # A tibble: 45 x 2
#>    key                                   n
#>  * <chr>                             <int>
#>  1 edu_doctor_graduated_f             7760
#>  2 edu_doctor_ungraduated_f           7760
#>  3 edu_doctor_ungraduated_m           7760
#>  4 edu_illiterate_f                   7760
#>  5 edu_illiterate_m                   7760
#>  6 edu_junior_graduated_f             7760
#>  7 edu_junior_graduated_m             7760
#>  8 edu_junior_ungraduated_f           7760
#>  9 edu_junior_ungraduated_m           7760
#> 10 edu_juniorcollege_2ys_graduated_f  7760
#> # … with 35 more rows
### your code
### your result should be
#> # A tibble: 349,200 x 9
#>    district_code site_id  village edu_doctor_gradu… edu   level  graduate gender
#>    <chr>         <chr>    <chr>               <int> <chr> <chr>  <chr>    <chr>
#>  1 65000010001   新北市板橋區… 留侯里                  4 edu   doctor graduat… f
#>  2 65000010001   新北市板橋區… 留侯里                  4 edu   doctor ungradu… m
#>  3 65000010001   新北市板橋區… 留侯里                  4 edu   doctor ungradu… f
#>  4 65000010001   新北市板橋區… 留侯里                  4 edu   master graduat… m
#>  5 65000010001   新北市板橋區… 留侯里                  4 edu   master graduat… f
#>  6 65000010001   新北市板橋區… 留侯里                  4 edu   master ungradu… m
#>  7 65000010001   新北市板橋區… 留侯里                  4 edu   master ungradu… f
#>  8 65000010001   新北市板橋區… 留侯里                  4 edu   unive… graduat… m
#>  9 65000010001   新北市板橋區… 留侯里                  4 edu   unive… graduat… f
#> 10 65000010001   新北市板橋區… 留侯里                  4 edu   unive… ungradu… m
#> # … with 349,190 more rows, and 1 more variable: value <int>
### 這邊讓你看 key 的長相
df_education_wide %>% count(key)
df_education_wide %>%
separate(key,c("edu","level","edu_status","gender")) %>%
str_replace(string = "赤松里", pattern = "里", replacement = "超")%>%view
### count 結果借你看
#> # A tibble: 45 x 2
#>    key                                   n
#>  * <chr>                             <int>
#>  1 edu_doctor_graduated_f             7760
#>  2 edu_doctor_ungraduated_f           7760
#>  3 edu_doctor_ungraduated_m           7760
#>  4 edu_illiterate_f                   7760
#>  5 edu_illiterate_m                   7760
#>  6 edu_junior_graduated_f             7760
#>  7 edu_junior_graduated_m             7760
#>  8 edu_junior_ungraduated_f           7760
#>  9 edu_junior_ungraduated_m           7760
#> 10 edu_juniorcollege_2ys_graduated_f  7760
#> # … with 35 more rows
### your code
### your result should be
#> # A tibble: 349,200 x 9
#>    district_code site_id  village edu_doctor_gradu… edu   level  graduate gender
#>    <chr>         <chr>    <chr>               <int> <chr> <chr>  <chr>    <chr>
#>  1 65000010001   新北市板橋區… 留侯里                  4 edu   doctor graduat… f
#>  2 65000010001   新北市板橋區… 留侯里                  4 edu   doctor ungradu… m
#>  3 65000010001   新北市板橋區… 留侯里                  4 edu   doctor ungradu… f
#>  4 65000010001   新北市板橋區… 留侯里                  4 edu   master graduat… m
#>  5 65000010001   新北市板橋區… 留侯里                  4 edu   master graduat… f
#>  6 65000010001   新北市板橋區… 留侯里                  4 edu   master ungradu… m
#>  7 65000010001   新北市板橋區… 留侯里                  4 edu   master ungradu… f
#>  8 65000010001   新北市板橋區… 留侯里                  4 edu   unive… graduat… m
#>  9 65000010001   新北市板橋區… 留侯里                  4 edu   unive… graduat… f
#> 10 65000010001   新北市板橋區… 留侯里                  4 edu   unive… ungradu… m
#> # … with 349,190 more rows, and 1 more variable: value <int>
### 這邊讓你看 key 的長相
df_education_wide %>% count(key)
df_education_wide %>%
separate(key,c("edu","level","edu_status","gender")) %>%
str_replace("里", "超","赤松里")%>%view
### count 結果借你看
#> # A tibble: 45 x 2
#>    key                                   n
#>  * <chr>                             <int>
#>  1 edu_doctor_graduated_f             7760
#>  2 edu_doctor_ungraduated_f           7760
#>  3 edu_doctor_ungraduated_m           7760
#>  4 edu_illiterate_f                   7760
#>  5 edu_illiterate_m                   7760
#>  6 edu_junior_graduated_f             7760
#>  7 edu_junior_graduated_m             7760
#>  8 edu_junior_ungraduated_f           7760
#>  9 edu_junior_ungraduated_m           7760
#> 10 edu_juniorcollege_2ys_graduated_f  7760
#> # … with 35 more rows
### your code
### your result should be
#> # A tibble: 349,200 x 9
#>    district_code site_id  village edu_doctor_gradu… edu   level  graduate gender
#>    <chr>         <chr>    <chr>               <int> <chr> <chr>  <chr>    <chr>
#>  1 65000010001   新北市板橋區… 留侯里                  4 edu   doctor graduat… f
#>  2 65000010001   新北市板橋區… 留侯里                  4 edu   doctor ungradu… m
#>  3 65000010001   新北市板橋區… 留侯里                  4 edu   doctor ungradu… f
#>  4 65000010001   新北市板橋區… 留侯里                  4 edu   master graduat… m
#>  5 65000010001   新北市板橋區… 留侯里                  4 edu   master graduat… f
#>  6 65000010001   新北市板橋區… 留侯里                  4 edu   master ungradu… m
#>  7 65000010001   新北市板橋區… 留侯里                  4 edu   master ungradu… f
#>  8 65000010001   新北市板橋區… 留侯里                  4 edu   unive… graduat… m
#>  9 65000010001   新北市板橋區… 留侯里                  4 edu   unive… graduat… f
#> 10 65000010001   新北市板橋區… 留侯里                  4 edu   unive… ungradu… m
#> # … with 349,190 more rows, and 1 more variable: value <int>
### 這邊讓你看 key 的長相
df_education_wide %>% count(key)
df_education_wide %>%
mutate(key = str_replace(key,"edu_illiterate_f","f"))%>%
separate(key,c("edu","level","edu_status","gender")) %>%view
### count 結果借你看
#> # A tibble: 45 x 2
#>    key                                   n
#>  * <chr>                             <int>
#>  1 edu_doctor_graduated_f             7760
#>  2 edu_doctor_ungraduated_f           7760
#>  3 edu_doctor_ungraduated_m           7760
#>  4 edu_illiterate_f                   7760
#>  5 edu_illiterate_m                   7760
#>  6 edu_junior_graduated_f             7760
#>  7 edu_junior_graduated_m             7760
#>  8 edu_junior_ungraduated_f           7760
#>  9 edu_junior_ungraduated_m           7760
#> 10 edu_juniorcollege_2ys_graduated_f  7760
#> # … with 35 more rows
### your code
### your result should be
#> # A tibble: 349,200 x 9
#>    district_code site_id  village edu_doctor_gradu… edu   level  graduate gender
#>    <chr>         <chr>    <chr>               <int> <chr> <chr>  <chr>    <chr>
#>  1 65000010001   新北市板橋區… 留侯里                  4 edu   doctor graduat… f
#>  2 65000010001   新北市板橋區… 留侯里                  4 edu   doctor ungradu… m
#>  3 65000010001   新北市板橋區… 留侯里                  4 edu   doctor ungradu… f
#>  4 65000010001   新北市板橋區… 留侯里                  4 edu   master graduat… m
#>  5 65000010001   新北市板橋區… 留侯里                  4 edu   master graduat… f
#>  6 65000010001   新北市板橋區… 留侯里                  4 edu   master ungradu… m
#>  7 65000010001   新北市板橋區… 留侯里                  4 edu   master ungradu… f
#>  8 65000010001   新北市板橋區… 留侯里                  4 edu   unive… graduat… m
#>  9 65000010001   新北市板橋區… 留侯里                  4 edu   unive… graduat… f
#> 10 65000010001   新北市板橋區… 留侯里                  4 edu   unive… ungradu… m
#> # … with 349,190 more rows, and 1 more variable: value <int>
### 這邊讓你看 key 的長相
df_education_wide %>% count(key)
df_education_wide %>%
mutate(key = str_replace(key,"edu_illiterate_f","edu_illiterate_all_f"))%>%
mutate(key = str_replace(key,"edu_juniorcollege_2ys_graduated_m","edu_juniorcollege2ys_graduated_m"))%>%
separate(key,c("edu","level","edu_status","gender")) %>%view
### count 結果借你看
#> # A tibble: 45 x 2
#>    key                                   n
#>  * <chr>                             <int>
#>  1 edu_doctor_graduated_f             7760
#>  2 edu_doctor_ungraduated_f           7760
#>  3 edu_doctor_ungraduated_m           7760
#>  4 edu_illiterate_f                   7760
#>  5 edu_illiterate_m                   7760
#>  6 edu_junior_graduated_f             7760
#>  7 edu_junior_graduated_m             7760
#>  8 edu_junior_ungraduated_f           7760
#>  9 edu_junior_ungraduated_m           7760
#> 10 edu_juniorcollege_2ys_graduated_f  7760
#> # … with 35 more rows
### your code
### your result should be
#> # A tibble: 349,200 x 9
#>    district_code site_id  village edu_doctor_gradu… edu   level  graduate gender
#>    <chr>         <chr>    <chr>               <int> <chr> <chr>  <chr>    <chr>
#>  1 65000010001   新北市板橋區… 留侯里                  4 edu   doctor graduat… f
#>  2 65000010001   新北市板橋區… 留侯里                  4 edu   doctor ungradu… m
#>  3 65000010001   新北市板橋區… 留侯里                  4 edu   doctor ungradu… f
#>  4 65000010001   新北市板橋區… 留侯里                  4 edu   master graduat… m
#>  5 65000010001   新北市板橋區… 留侯里                  4 edu   master graduat… f
#>  6 65000010001   新北市板橋區… 留侯里                  4 edu   master ungradu… m
#>  7 65000010001   新北市板橋區… 留侯里                  4 edu   master ungradu… f
#>  8 65000010001   新北市板橋區… 留侯里                  4 edu   unive… graduat… m
#>  9 65000010001   新北市板橋區… 留侯里                  4 edu   unive… graduat… f
#> 10 65000010001   新北市板橋區… 留侯里                  4 edu   unive… ungradu… m
#> # … with 349,190 more rows, and 1 more variable: value <int>
### 這邊讓你看 key 的長相
df_education_wide %>% count(key)
as.tibble(df_education_wide %>%
mutate(key = str_replace(key,"edu_illiterate_f","edu_illiterate_all_f"))%>%
mutate(key = str_replace(key,"edu_juniorcollege_2ys_graduated_m","edu_juniorcollege2ys_graduated_m"))%>%
separate(key,c("edu","level","edu_status","gender")) )
### count 結果借你看
#> # A tibble: 45 x 2
#>    key                                   n
#>  * <chr>                             <int>
#>  1 edu_doctor_graduated_f             7760
#>  2 edu_doctor_ungraduated_f           7760
#>  3 edu_doctor_ungraduated_m           7760
#>  4 edu_illiterate_f                   7760
#>  5 edu_illiterate_m                   7760
#>  6 edu_junior_graduated_f             7760
#>  7 edu_junior_graduated_m             7760
#>  8 edu_junior_ungraduated_f           7760
#>  9 edu_junior_ungraduated_m           7760
#> 10 edu_juniorcollege_2ys_graduated_f  7760
#> # … with 35 more rows
### your code
### your result should be
#> # A tibble: 349,200 x 9
#>    district_code site_id  village edu_doctor_gradu… edu   level  graduate gender
#>    <chr>         <chr>    <chr>               <int> <chr> <chr>  <chr>    <chr>
#>  1 65000010001   新北市板橋區… 留侯里                  4 edu   doctor graduat… f
#>  2 65000010001   新北市板橋區… 留侯里                  4 edu   doctor ungradu… m
#>  3 65000010001   新北市板橋區… 留侯里                  4 edu   doctor ungradu… f
#>  4 65000010001   新北市板橋區… 留侯里                  4 edu   master graduat… m
#>  5 65000010001   新北市板橋區… 留侯里                  4 edu   master graduat… f
#>  6 65000010001   新北市板橋區… 留侯里                  4 edu   master ungradu… m
#>  7 65000010001   新北市板橋區… 留侯里                  4 edu   master ungradu… f
#>  8 65000010001   新北市板橋區… 留侯里                  4 edu   unive… graduat… m
#>  9 65000010001   新北市板橋區… 留侯里                  4 edu   unive… graduat… f
#> 10 65000010001   新北市板橋區… 留侯里                  4 edu   unive… ungradu… m
#> # … with 349,190 more rows, and 1 more variable: value <int>
